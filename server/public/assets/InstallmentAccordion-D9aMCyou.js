import{a8 as K,r as d,a9 as T,j as e,b2 as Q,ad as j,ab as U,aa as he,ae as q,ak as be,U as m,aM as M,b4 as ve}from"./index-Cl1SQMCp.js";import{c as Ce,u as ge}from"./index-7vMckiJz.js";import{C as Ae}from"./chevron-down-CZWChAHx.js";var R="Collapsible",[Ne,z]=K(R),[je,k]=Ne(R),Y=d.forwardRef((o,n)=>{const{__scopeCollapsible:t,open:r,defaultOpen:s,disabled:a,onOpenChange:c,...i}=o,[p,u]=T({prop:r,defaultProp:s??!1,onChange:c,caller:R});return e.jsx(je,{scope:t,disabled:a,contentId:Q(),open:p,onOpenToggle:d.useCallback(()=>u(x=>!x),[u]),children:e.jsx(j.div,{"data-state":V(p),"data-disabled":a?"":void 0,...i,ref:n})})});Y.displayName=R;var J="CollapsibleTrigger",W=d.forwardRef((o,n)=>{const{__scopeCollapsible:t,...r}=o,s=k(J,t);return e.jsx(j.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":V(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:n,onClick:U(o.onClick,s.onOpenToggle)})});W.displayName=J;var L="CollapsibleContent",X=d.forwardRef((o,n)=>{const{forceMount:t,...r}=o,s=k(L,o.__scopeCollapsible);return e.jsx(he,{present:t||s.open,children:({present:a})=>e.jsx(ye,{...r,ref:n,present:a})})});X.displayName=L;var ye=d.forwardRef((o,n)=>{const{__scopeCollapsible:t,present:r,children:s,...a}=o,c=k(L,t),[i,p]=d.useState(r),u=d.useRef(null),x=q(n,u),f=d.useRef(0),A=f.current,b=d.useRef(0),y=b.current,v=c.open||i,C=d.useRef(v),g=d.useRef(void 0);return d.useEffect(()=>{const l=requestAnimationFrame(()=>C.current=!1);return()=>cancelAnimationFrame(l)},[]),be(()=>{const l=u.current;if(l){g.current=g.current||{transitionDuration:l.style.transitionDuration,animationName:l.style.animationName},l.style.transitionDuration="0s",l.style.animationName="none";const N=l.getBoundingClientRect();f.current=N.height,b.current=N.width,C.current||(l.style.transitionDuration=g.current.transitionDuration,l.style.animationName=g.current.animationName),p(r)}},[c.open,r]),e.jsx(j.div,{"data-state":V(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!v,...a,ref:x,style:{"--radix-collapsible-content-height":A?`${A}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...o.style},children:v&&s})});function V(o){return o?"open":"closed"}var Ie=Y,Re=W,we=X,h="Accordion",_e=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[$,Pe,Ee]=Ce(h),[w,Ke]=K(h,[Ee,z]),H=z(),Z=m.forwardRef((o,n)=>{const{type:t,...r}=o,s=r,a=r;return e.jsx($.Provider,{scope:o.__scopeAccordion,children:t==="multiple"?e.jsx(Te,{...a,ref:n}):e.jsx(Oe,{...s,ref:n})})});Z.displayName=h;var[ee,De]=w(h),[oe,Se]=w(h,{collapsible:!1}),Oe=m.forwardRef((o,n)=>{const{value:t,defaultValue:r,onValueChange:s=()=>{},collapsible:a=!1,...c}=o,[i,p]=T({prop:t,defaultProp:r??"",onChange:s,caller:h});return e.jsx(ee,{scope:o.__scopeAccordion,value:m.useMemo(()=>i?[i]:[],[i]),onItemOpen:p,onItemClose:m.useCallback(()=>a&&p(""),[a,p]),children:e.jsx(oe,{scope:o.__scopeAccordion,collapsible:a,children:e.jsx(te,{...c,ref:n})})})}),Te=m.forwardRef((o,n)=>{const{value:t,defaultValue:r,onValueChange:s=()=>{},...a}=o,[c,i]=T({prop:t,defaultProp:r??[],onChange:s,caller:h}),p=m.useCallback(x=>i((f=[])=>[...f,x]),[i]),u=m.useCallback(x=>i((f=[])=>f.filter(A=>A!==x)),[i]);return e.jsx(ee,{scope:o.__scopeAccordion,value:c,onItemOpen:p,onItemClose:u,children:e.jsx(oe,{scope:o.__scopeAccordion,collapsible:!0,children:e.jsx(te,{...a,ref:n})})})}),[Me,_]=w(h),te=m.forwardRef((o,n)=>{const{__scopeAccordion:t,disabled:r,dir:s,orientation:a="vertical",...c}=o,i=m.useRef(null),p=q(i,n),u=Pe(t),f=ge(s)==="ltr",A=U(o.onKeyDown,b=>{var G;if(!_e.includes(b.key))return;const y=b.target,v=u().filter(S=>{var F;return!((F=S.ref.current)!=null&&F.disabled)}),C=v.findIndex(S=>S.ref.current===y),g=v.length;if(C===-1)return;b.preventDefault();let l=C;const N=0,P=g-1,E=()=>{l=C+1,l>P&&(l=N)},D=()=>{l=C-1,l<N&&(l=P)};switch(b.key){case"Home":l=N;break;case"End":l=P;break;case"ArrowRight":a==="horizontal"&&(f?E():D());break;case"ArrowDown":a==="vertical"&&E();break;case"ArrowLeft":a==="horizontal"&&(f?D():E());break;case"ArrowUp":a==="vertical"&&D();break}const fe=l%g;(G=v[fe].ref.current)==null||G.focus()});return e.jsx(Me,{scope:t,disabled:r,direction:s,orientation:a,children:e.jsx($.Slot,{scope:t,children:e.jsx(j.div,{...c,"data-orientation":a,ref:p,onKeyDown:r?void 0:A})})})}),I="AccordionItem",[ke,B]=w(I),ne=m.forwardRef((o,n)=>{const{__scopeAccordion:t,value:r,...s}=o,a=_(I,t),c=De(I,t),i=H(t),p=Q(),u=r&&c.value.includes(r)||!1,x=a.disabled||o.disabled;return e.jsx(ke,{scope:t,open:u,disabled:x,triggerId:p,children:e.jsx(Ie,{"data-orientation":a.orientation,"data-state":le(u),...i,...s,ref:n,disabled:x,open:u,onOpenChange:f=>{f?c.onItemOpen(r):c.onItemClose(r)}})})});ne.displayName=I;var re="AccordionHeader",ae=m.forwardRef((o,n)=>{const{__scopeAccordion:t,...r}=o,s=_(h,t),a=B(re,t);return e.jsx(j.h3,{"data-orientation":s.orientation,"data-state":le(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:n})});ae.displayName=re;var O="AccordionTrigger",se=m.forwardRef((o,n)=>{const{__scopeAccordion:t,...r}=o,s=_(h,t),a=B(O,t),c=Se(O,t),i=H(t);return e.jsx($.ItemSlot,{scope:t,children:e.jsx(Re,{"aria-disabled":a.open&&!c.collapsible||void 0,"data-orientation":s.orientation,id:a.triggerId,...i,...r,ref:n})})});se.displayName=O;var ce="AccordionContent",ie=m.forwardRef((o,n)=>{const{__scopeAccordion:t,...r}=o,s=_(h,t),a=B(ce,t),c=H(t);return e.jsx(we,{role:"region","aria-labelledby":a.triggerId,"data-orientation":s.orientation,...c,...r,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...o.style}})});ie.displayName=ce;function le(o){return o?"open":"closed"}var Le=Z,Ve=ne,$e=ae,de=se,pe=ie;const He=Le,ue=d.forwardRef(({className:o,...n},t)=>e.jsx(Ve,{ref:t,className:M("border-b",o),...n}));ue.displayName="AccordionItem";const me=d.forwardRef(({className:o,children:n,...t},r)=>e.jsx($e,{className:"flex",children:e.jsxs(de,{ref:r,className:M("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",o),...t,children:[n,e.jsx(Ae,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));me.displayName=de.displayName;const xe=d.forwardRef(({className:o,children:n,...t},r)=>e.jsx(pe,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...t,children:e.jsx("div",{className:M("pb-4 pt-0",o),children:n})}));xe.displayName=pe.displayName;const Qe=({billNumber:o})=>{var s,a;const{data:n,isLoading:t}=ve(o);if(t)return e.jsx("p",{children:"Loading installments..."});if(!((s=n==null?void 0:n.installments)!=null&&s.length))return e.jsx("p",{children:"No installments found."});const r=(a=n.products)==null?void 0:a.reduce((c,i)=>c+(i.quantity||0),0);return e.jsx(e.Fragment,{children:e.jsx(He,{type:"single",collapsible:!0,defaultValue:"installments",children:e.jsxs(ue,{value:"installments",children:[e.jsxs(me,{children:["Installments for Bill No: ",n.billNumber]}),e.jsx(xe,{children:e.jsxs("table",{className:"w-full text-sm text-left border mt-2",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-1 border",children:"Bill No"}),e.jsx("th",{className:"px-2 py-1 border",children:"Date"}),e.jsx("th",{className:"px-2 py-1 border",children:"Products"}),e.jsx("th",{className:"px-2 py-1 border",children:"Total (₹)"}),e.jsx("th",{className:"px-2 py-1 border",children:"Paid (₹)"}),e.jsx("th",{className:"px-2 py-1 border",children:"Pending (₹)"}),e.jsx("th",{className:"px-2 py-1 border",children:"Quantity"}),e.jsx("th",{className:"px-2 py-1 border",children:"Mode"}),e.jsx("th",{className:"px-2 py-1 border",children:"Status"})]})}),e.jsx("tbody",{children:n.installments.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-1 border",children:n.billNumber}),e.jsx("td",{className:"px-2 py-1 border",children:new Date(c.paymentDate).toLocaleDateString()}),e.jsx("td",{className:"px-2 py-1 border",children:n.products.map(i=>i.product.name).join(", ")}),e.jsxs("td",{className:"px-2 py-1 border",children:["₹",n.totalAmount]}),e.jsxs("td",{className:"px-2 py-1 border",children:["₹",c.amount]}),e.jsxs("td",{className:"px-2 py-1 border",children:["₹",n.pendingAmount]}),e.jsx("td",{className:"px-2 py-1 border",children:r}),e.jsx("td",{className:"px-2 py-1 border",children:c.paymentMode}),e.jsx("td",{className:"px-2 py-1 border",children:c.status})]},c._id))})]})})]})})})};export{Qe as default};
