import{i as E,u as S,am as A,an as C,ao as w,r as l,j as e,I as o,B as j}from"./index-Cl1SQMCp.js";import{u as F,t as M,o as q,e as f,s as d}from"./zod-Cx2om5l9.js";import{t as c}from"./index-MnOYjBE-.js";import{L as i}from"./label-DJCwXsjE.js";import{C as I,a as T,b as L,d as U}from"./card-mR9xUq05.js";import{T as B}from"./textarea-G-lwuaAY.js";import{I as R}from"./icons-DO8VyPGD.js";import"./leaf-DQch67_8.js";import"./briefcase-ChOFTStc.js";const k=q({name:d().min(1,"Name is required"),email:d().email("Enter a valid email"),phone:d().min(1,"Mobile number is required"),address:d().min(1,"Address is required"),role:f(["Admin","Sales","Manager"],{required_error:"Role is required"}),status:f(["active","inactive"],{required_error:"Status is required"})}),P={name:"",email:"",phone:"",address:"",role:"Sales",status:"active"},O=()=>{const{id:r}=E(),n=S(),{register:t,handleSubmit:v,reset:m,formState:{errors:s}}=F({resolver:M(k),defaultValues:P}),[y,{isSuccess:u,isError:p}]=A(),[N,{isSuccess:x}]=C(),{data:a,isLoading:g}=w(r??"",{skip:!r||!navigator.onLine});l.useEffect(()=>{r&&a&&m({name:a.name||"",email:a.email||"",phone:a.phone||"",address:a.address||"",role:["Admin","Sales","Manager"].includes(a.role)?a.role:"Sales",status:["active","inactive"].includes(a.status??"")?a.status:"active"})},[r,a,m]),l.useEffect(()=>{u&&(c.success("Employee created successfully"),n("/admin/employee-table"))},[u,n]),l.useEffect(()=>{x&&(c.success("Employee updated successfully"),n("/admin/employee-table"))},[x]),l.useEffect(()=>{p&&c.error("Failed to create employee")},[p]);const b=h=>{r?N({id:r,data:h}):y(h)};return e.jsx("div",{className:"max-w-3xl mx-auto py-8",children:e.jsxs(I,{children:[e.jsxs(T,{className:"flex items-center justify-center",children:[e.jsx(R.user,{className:"h-10 w-20 mb-2 text-blue-500"}),e.jsx(L,{children:r?"Update Employee":"Add Employee"})]}),e.jsx(U,{children:e.jsxs("form",{onSubmit:v(b),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",children:"Name"}),e.jsx(o,{id:"name",...t("name")}),s.name&&e.jsx("p",{className:"text-red-500 text-sm",children:s.name.message})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(o,{id:"email",type:"email",...t("email")}),s.email&&e.jsx("p",{className:"text-red-500 text-sm",children:s.email.message})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx(i,{htmlFor:"phone",children:"Mobile"}),e.jsx(o,{id:"phone",...t("phone")}),s.phone&&e.jsx("p",{className:"text-red-500 text-sm",children:s.phone.message})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"address",children:"Address"}),e.jsx(B,{id:"address",...t("address")}),s.address&&e.jsx("p",{className:"text-red-500 text-sm",children:s.address.message})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx(i,{htmlFor:"role",children:"Role"}),e.jsxs("select",{id:"role",...t("role"),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"Sales",children:"Sales"}),e.jsx("option",{value:"Manager",children:"Manager"})]}),s.role&&e.jsx("p",{className:"text-red-500 text-sm",children:s.role.message})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx(i,{htmlFor:"status",children:"Status"}),e.jsxs("select",{id:"status",...t("status"),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),s.status&&e.jsx("p",{className:"text-red-500 text-sm",children:s.status.message})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(j,{className:"bg-red-600",type:"button",variant:"outline",onClick:()=>m(),children:"Cancel"}),e.jsx(j,{className:"bg-green-700",type:"submit",disabled:g,children:r?"Update":"Save"})]})]})})]})})};export{O as default};
