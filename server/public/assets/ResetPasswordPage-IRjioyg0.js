import{g as h,u as P,h as j,r as l,j as s,I as p,B as y}from"./index-Cl1SQMCp.js";import{u as N,t as b,o as C,s as w}from"./zod-Cx2om5l9.js";import{C as S,a as E,b as R,d as v}from"./card-mR9xUq05.js";import{t}from"./index-MnOYjBE-.js";import{I}from"./icons-DO8VyPGD.js";import"./leaf-DQch67_8.js";import"./briefcase-ChOFTStc.js";const k=C({password:w().min(6,"Password is too short"),confirmPassword:w()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function q(){const[e]=h(),o=e.get("token"),c=P(),[f,{isSuccess:i,isError:n,isLoading:d}]=j(),{register:m,handleSubmit:u,formState:{errors:r}}=N({resolver:b(k)}),x=async g=>{if(!o)return t.error("Missing token");try{await f({...g,token:o}).unwrap()}catch(a){console.log((a==null?void 0:a.message)||"Failed to reset password")}};return l.useEffect(()=>{i&&(t.success("Password reset successfully"),c("/login"))},[i,c]),l.useEffect(()=>{n&&t.error("Failed to reset password. Please try again.")},[n]),s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 bg-gray-100",children:s.jsxs(S,{className:"w-full max-w-md",children:[s.jsxs(E,{className:"flex items-center justify-center",children:[s.jsx(I.flower,{className:"h-10 w-20 mb-2 text-green-400"}),s.jsx(R,{className:"text-center",children:"Reset Password"})]}),s.jsx(v,{children:s.jsxs("form",{onSubmit:u(x),className:"space-y-4",children:[s.jsx(p,{type:"password",placeholder:"New Password",...m("password")}),r.password&&s.jsx("p",{className:"text-red-500 text-sm",children:r.password.message}),s.jsx(p,{type:"password",placeholder:"Confirm Password",...m("confirmPassword")}),r.confirmPassword&&s.jsx("p",{className:"text-red-500 text-sm",children:r.confirmPassword.message}),s.jsx(y,{type:"submit",className:"w-full bg-green-400",disabled:d,children:d?"Resetting...":"Reset Password"})]})})]})})}export{q as default};
